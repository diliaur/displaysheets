<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Southeast Asia Related Scholarships | UH CSEAS</title>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
	<link rel="stylesheet" type="text/css" href="scholarships.css">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
</head>
<body>

	<div class="ui left sidebar">

		<h2>Filter Results</h2>

		<form id="filter-options">
			<fieldset>
				<legend>Country</legend>
				<label for="country-brunei"><input type="checkbox" id="country-brunei" value="brunei"> Brunei</label>
				<label for="country-cambodia"><input type="checkbox" id="country-cambodia" value="cambodia"> Cambodia</label>
				<label for="country-indonesia"><input type="checkbox" id="country-indonesia" value="indonesia"> Indonesia</label>
				<label for="country-laos"><input type="checkbox" id="country-laos" value="laos"> Laos</label>
				<label for="country-malaysia"><input type="checkbox" id="country-malaysia" value="malaysia"> Malaysia</label>
				<label for="country-myanmar"><input type="checkbox" id="country-myanmar" value="myanmar"> Myanmar</label>
				<label for="country-philippines"><input type="checkbox" id="country-philippines" value="philippines"> Philippines</label>
				<label for="country-singapore"><input type="checkbox" id="country-singapore" value="singapore"> Singapore</label>
				<label for="country-thailand"><input type="checkbox" id="country-thailand" value="thailand"> Thailand</label>
				<label for="country-timor-leste"><input type="checkbox" id="country-timor-leste" value="timor-leste"> Timor-Leste</label>
				<label for="country-vietnam"><input type="checkbox" id="country-vietnam" value="vietnam"> Vietnam</label>
			</fieldset>
			<fieldset>
				<legend>Fund Source</legend>
				<label for="fund-source-internal"><input type="checkbox" id="fund-source-internal" value="fund-source-internal"> Internal (UH Mānoa funding)</label>
				<label for="fund-source-external"><input type="checkbox" id="fund-source-external" value="fund-source-external"> External (Non-UH Mānoa)</label>
			</fieldset>
			<fieldset>
				<legend>Citizenship</legend>
				<label for="eligibility-citizenship-us"><input type="checkbox" id="eligibility-citizenship-us" value="elibility-citizenship-us"> United States</label>
				<!-- <label for="elibility-citizenship-nonus"><input type="checkbox" id="eligibility-citizenship-nonus" value="elibility-citizenship-nonus"> non-US Citizen</label>
				<label for="elibility-citizenship-any"><input type="checkbox" id="eligibility-citizenship-any" value="elibility-citizenship-any"> Any/no restriction</label> -->
			</fieldset>
			<fieldset>
				<legend>Class Level</legend>
				<label for="eligibility-level-undergraduate"><input type="checkbox" id="eligibility-level-undergraduate" value="eligibility-level-undergraduate"> Undergraduate</label>
				<label for="eligibility-level-graduate"><input type="checkbox" id="eligibility-level-graduate" value="eligibility-level-graduate"> Graduate</label>
				<label for="eligibility-level-professional"><input type="checkbox" id="eligibility-level-professional" value="eligibility-level-professional"> Professional</label>
			</fieldset>
		</form>

		<h2>About this Resource</h2>
		<a href="#collapse-about" class="s-collapse-toggle" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapse-about">See more</a>
		<div class="collapse" id="collapse-about">
			<p>
			This is a list of scholarships which may be applicable or related to study in or of Southeast Asia. We try to keep it up to date, but due to staffing constraints, some things may get past us. Please alert us of any broken links or other issues at <a href="mailto:cseasweb@hawaii.edu">cseasweb@hawaii.edu</a>. Because this is a curated list (these awards, unless otherwise stated, are not administered by CSEAS), please see the contact point or website for more information on specific awards.
			</p>
			<p>
				You can also examine the spreadsheet itself if you prefer a tabular data format.
			</p>
		</div>

		<h2>Key</h2>
		<a href="#collapse-key" class="s-collapse-toggle" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapse-key">See more</a>
		<div class="collapse" id="collapse-key">
			This key defines some terminology used in the scholarship descriptions.
			<ul>
				<li><b>Fund source</b>: internal/external - whether the source is UH Mānoa or an external entity.</li>
				<li><b>Length</b>: short term/long term/n/a - period of time of the award if stated. Time periods mostly apply to workshop and professional devlopment type awards</li>
				<li><b>Grade level</b>: undergraduate/graduate/faculty/professional</li>
				<li><b>Place of Study</b> - country or countries where you will be able to apply the award</li>
				<li><b>SEA Country Focus</b> - some awards are specific to a certain country or countries in ASEAN</li>
				<li><b>Discipline Focus</b> - which fields/disciplines are covered by the award</li>
				<li><b>Citizenship</b> - citizenship requirement of the applicant</li>
			</ul>
		</div>
	</div>
	<div class="pusher">
		<div class="ui top attached menu inverted">
			<div class="item" id="s-menu-toggle"><i class="large bars icon"></i> Filter</div>
			<div class="header item">Southeast Asia Related Scholarships</div>
		</div>
		<div id="list-wrapper"><!-- both search & list must be inside this wrapper for search to work-->
			<div id="search-wrapper" class="">
				<label>Search by keyword:
					<input class="search" placeholder="search by keyword (example: 'language')"><br/>
				</label>
				<span class="search-help">Results will be narrowed by matching to search terms.</span>
			</div>
			<div id="award-wrapper" class="ui basic segment">
				<table id="awards-table" class="ui unstackable celled striped table">
					<thead>
						<tr id="awards-table-header-row">
							<th class="sort" data-sort="name">Name</th>
							<th>Website</th>
							<th class="sort" data-sort="fundsource">Funding Source</th>
							<th class="sort" data-sort="fundingtype">Funding Type</th>
							<th class="sort" data-sort="length">Length</th>
							<th>Place of Study</th>
							<th>SEA Country Focus</th>
							<th>Discipline Focus</th>
							<th class="sort" data-sort="gradelevel">Class Level</th>
							<th class="sort" data-sort="citizenship">Citizenship Requirement</th>
							<th>Contact Name</th>
							<th>Contact Email</th>
						</tr>
					</thead>
					<tbody class="list"><!-- class="list" is CRITICAL for list.js to recognize it. underlying structure is not as imp -->
					<!-- This is where the data will go.
					The structure is populated by List.js & Tabletop -->
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!-- sidebar properties & toggle button -->
	<script>
		$('.ui.left.sidebar').sidebar({
			dimPage:true,
			closable:true // so if click within pusher, sidebar doesn't close
		});

		// only toggle the sidebar with this element
		document.getElementById('s-menu-toggle').addEventListener('click',function(){
			$('.ui.left.sidebar').sidebar('toggle');
		});
	</script>

	<!-- Tabletop -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
	<!-- List.js for sort and filter -->
	<script src="list.min.js"></script>
	<!-- custom -->
	<!-- <script src="scholarships.js"></script> -->
	<!-- Test rewrite of list & filter functionality -->
	<script>
		/*
		* processing data from google sheet via Tabletop
		*/
		var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/13JTS8DX4z5BZ6bTwgkmssxcERodv6Tl5OKaj_EJ2qIA/edit?usp=sharing';

		function init() {
			Tabletop.init( { key: publicSpreadsheetUrl,
											 callback: showInfo,
											 simpleSheet: true,
										 prettyColumnNames: false} )
		}

		function showInfo(data, tabletop) {
			console.log('Successfully processed!')
			// data is an array of objects
			console.log(data);

			/*
			 * ListJS initialization
			 */
			var options = {
				valueNames: [ 'name', {name: 'url', attr: 'href'}, 'fundsource', 'fundingtype', 'length',
								'placeofstudy', 'seacountryfocus', 'disciplinefocus',
								'gradelevel', 'citizenship', 'contactname', 'contactemail'],
				item: '<tr><td class="name">Name</td><td><a class="url" target="_blank">More Info</a></td><td class="fundsource">Funding Source</td><td class="fundingtype">Funding Type</td><td class="length">Length</td><td class="placeofstudy">Place of Study</td><td class="seacountryfocus">SEA Country Focus</td><td class="disciplinefocus">Discipline Focus</td><td class="gradelevel">Class Level</td><td class="citizenship">Citizenship Requirement</td><td class="contactname">Contact Name</td><td class="contactemail">Contact Email</td></tr>'
			};

			var awardList = new List('list-wrapper', options, data); // attach list to HTML element

			/*
			 * List filtration controls
			 */

			let checked_countries = [];

			document.getElementById('country-brunei').addEventListener('click',function(){
				if (document.getElementById('country-brunei').checked) {
					// append current country to 'checked_countries'
					checked_countries.push('Brunei');

					// filter the list by checked_countries
					awardList.filter(function(row){
						let filter = false; // whether to filter or not
						checked_countries.forEach(e => {
							// if the 'seacountryfocus' col contains ANY of the checked_countries
							//   which SHOULD include Brunei by default since it's been added above
							if(row.values()['seacountryfocus'].toLowerCase().includes(e.toLowerCase())) {
								filter = true;
							} // no else, because if it never hits any of these IFs then it's already false
						});
						return filter;
					});
					console.log(checked_countries);
				} else { // unchecked
					// remove current country from 'checked_countries'
					let remove_i = checked_countries.indexOf('Brunei');
					if (remove_i > -1) {
						checked_countries.splice(remove_i,1); // splice out country
						console.log(checked_countries);
					}
					// filter the list again -- either empty or with remaining countries
					awardList.filter(); // unfilter to original list
				}
			});

			

		}

		window.addEventListener('DOMContentLoaded', init) // actually calls the tabletop code
	</script>
</body>
</html>
